<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sprint Results</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/style.css') }}" />
</head>

<body>
    <div class="topnav">
        <a href="/">Home</a>
        <div class="dropdown">
            <button class="dropbtn">Races</button>
            <div class="dropdown-content">
                <a href="/races">All Races</a>
                <a href="/who_won">Who Won</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Drivers</button>
            <div class="dropdown-content">
                <a href="/drivers">All Drivers</a>
                <a href="/driver_stats">Driver Stats</a>
            </div>
        </div>
        <a href="/results">Results</a>
        <a href="/pit_stops">Pit Stops</a>
        <a href="/driver_standings">Driver Standings</a>
        <a href="/sprint_results">Sprint Results</a>
        <div class="dropdown">
            <button class="dropbtn">Qualifying And Circuit Data</button>
            <div class="dropdown-content">
                <a href="/qualifying">Driver Qualifying Data</a>
                <a href="/circuits">All Circuits</a>
            </div>
        </div>
    </div>

    <h1>Sprint Results</h1>

    <form method="post" action="{{ url_for('sprint_results') }}">
        <label for="select_constructor">Constructor:</label>
        <select name="select_constructor" id="select_constructor">
            <option value="all">Constructor</option>
            {% for constructor in constructors %}
            <option value="{{ constructor[0] }}">{{ constructor[0] }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
        <a href="{{ url_for('sprint_results') }}"><button type="button">Reset</button></a>
    </form>

    <div style="float: right; margin-top: -40px;">
        <button onclick="openAddModal()">New Sprint Result</button>
    </div>

    <div id="addModal" class="modal">
        <div class="modal-content" id="addSprintResultForm" method="post" action="{{ url_for('add_sprint_result') }}">
            <form class="modal-form" id="addSprintResultForm" method="post" action="{{ url_for('add_sprint_result') }}">

                <label for="race">Race:</label>
                <input type="text" name="race" placeholder="Race" required />

                <label for="driver">Driver:</label>
                <input type="text" name="driver" placeholder="Driver" required />

                <label for="constructor">Constructor:</label>
                <input type="text" name="constructor" placeholder="Constructor" required />

                <label for="number">Number:</label>
                <input type="text" name="number" placeholder="Number" required />

                <label for="position">Position:</label>
                <input type="text" name="position" placeholder="Position" required />

                <label for="points">Points:</label>
                <input type="text" name="points" placeholder="Points" required />

                <label for="laps">Laps:</label>
                <input type="text" name="laps" placeholder="Laps" required />

                <label for="time">Time:</label>
                <input type="text" name="time" placeholder="Time" required />


                <label for="fastest_lap">Fastest Lap:</label>
                <input type="text" name="fastest_lap" placeholder="Fastest Lap" required />

                <label for="fastest_lap_time">Fastest Lap Time:</label>
                <input type="text" name="fastest_lap_time" placeholder="Fastest Lap Time" required />

                <button type="submit">Add Sprint Result</button>
                <button type="button" onclick="closeAddModal()">Cancel</button>
            </form>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content" id="editSprintResultForm">
            <form class="modal-form" method="post" action="{{ url_for('edit_sprint_result') }}">
                <label for="sprintResultId">Sprint Result ID:</label>
                <input type="text" name="sprintResultId" id="sprintResultId" required readonly/>

                <label for="race">Race:</label>
                <input type="text" name="race" placeholder="Race" required />

                <label for="driver">Driver:</label>
                <input type="text" name="driver" placeholder="Driver" required />

                <label for="constructor">Constructor:</label>
                <input type="text" name="constructor" placeholder="Constructor" required />

                <label for="number">Number:</label>
                <input type="text" name="number" placeholder="Number" required />

                <label for="position">Position:</label>
                <input type="text" name="position" placeholder="Position" required />

                <label for="points">Points:</label>
                <input type="text" name="points" placeholder="Points" required />

                <label for="laps">Laps:</label>
                <input type="text" name="laps" placeholder="Laps" required />

                <label for="time">Time:</label>
                <input type="text" name="time" placeholder="Time" required />

                <label for="fastest_lap">Fastest Lap:</label>
                <input type="text" name="fastest_lap" placeholder="Fastest Lap" required />

                <label for="fastest_lap_time">Fastest Lap Time:</label>
                <input type="text" name="fastest_lap_time" placeholder="Fastest Lap Time" required />

                <button type="submit">Update Sprint Result</button>
                <button type="button" onclick="closeAddModal()">Cancel</button>

            </form>
        </div>
    </div>

    <table>
        <tr>
            <th>Race</th>
            <th>Driver</th>
            <th>Constructor</th>
            <th>Number</th>
            <th>Position</th>
            <th>Points</th>
            <th>Laps</th>
            <th>Time</th>
            <th>Fastest Lap</th>
            <th>Fastest Lap Time</th>
            <th>Actions</th>
        </tr>
        {% for sprint_result in sprint_results %}
        <tr>
            <td>{{ sprint_result[1] }}</td>
            <td>{{ sprint_result[2] }}</td>
            <td>{{ sprint_result[3] }}</td>
            <td>{{ sprint_result[4] }}</td>
            <td>{{ sprint_result[5] }}</td>
            <td>{{ sprint_result[6] }}</td>
            <td>{{ sprint_result[7] }}</td>
            <td>{{ sprint_result[8] }}</td>
            <td>{{ sprint_result[9] }}</td>
            <td>{{ sprint_result[10] }}</td>
            <td>
                <button type="button" onclick="openEditModal('{{ sprint_result[0] }}')">Edit</button>
                <form method="post" action="{{ url_for('delete_sprint_result', result_id=sprint_result[0]) }}">
                <button class="delete" type="submit" onclick="return confirm('Are you sure you want to delete this record?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <script>
        function openEditModal(sprintResultId) {
            document.getElementById("sprintResultId").value = sprintResultId;
            document.getElementById("editModal").style.display = "block";
        }

        function closeEditModal() {
            document.getElementById("editModal").style.display = "none";
        }

        function openAddModal() {
            document.getElementById("addModal").style.display = "block";
        }

        function closeAddModal() {
            document.getElementById("addModal").style.display = "none";
        }
    </script>

</body>

</html>